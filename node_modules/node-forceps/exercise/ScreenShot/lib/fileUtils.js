var fs = require('fs');

var Q = require('q');

var readLastLine = function(filePath, encode) {
	var deferred = Q.defer();
	var _encode = (encode?encode:'utf-8');
	fs.readFile(filePath, _encode, function(err, data) {
		if (err) {
			deferred.reject(new Error(err));
		}
		var lines = data.trim().split('\n');
		var lastLine = lines.slice(-1)[0];
		deferred.resolve(lastLine);
	});
	return deferred.promise;
}
module.exports.readLastLine=readLastLine;
